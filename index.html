<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ˜¥ç¯€ä»£æ‰“ â€¢ æ€¨æ°£æ¶ˆæ•£</title>
    <meta name="description" content="éå¹´è¦ªæˆšæ‹·å•å¤ªç…©äººï¼Ÿè®“ AI å¹«ä½ ç”¨å¹½é»˜èˆ‡å˜²è«·å„ªé›…åæ“Šï¼Œä¸€éµç”Ÿæˆé•·è¼©åœ–å›æ•¬ï¼">
    
    <meta property="og:title" content="æ˜¥ç¯€ä»£æ‰“ â€¢ æ€¨æ°£æ¶ˆæ•£">
    <meta property="og:description" content="éå¹´è¦ªæˆšæ‹·å•å¤ªç…©äººï¼Ÿè®“ AI å¹«ä½ ç”¨å¹½é»˜èˆ‡å˜²è«·å„ªé›…åæ“Šï¼">
    <meta property="og:image" content="social.png">
    <meta property="og:url" content="https://ä½ çš„ç¶²åŸŸ.com">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    <meta name="theme-color" content="#B91C1C">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600;900&family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cnyRed: '#B91C1C',
                        cnyGold: '#F59E0B',
                        cnyBg: '#FFF1F2',
                    },
                    fontFamily: {
                        serif: ['"Noto Serif TC"', 'serif'],
                        // ç¢ºä¿åœ“é«”ä½¿ç”¨æ–°è¼‰å…¥çš„å­—é‡
                        round: ['"Zen Maru Gothic"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            /* ä½¿ç”¨ SVG ä½œç‚ºè¼•é‡åŒ–èƒŒæ™¯ç´‹ç† */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23B91C1C' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            /* ç¢ºä¿ä½¿ç”¨åœ“é«” */
            font-family: "Zen Maru Gothic", sans-serif;
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #B91C1C;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid #F59E0B;
        }
        /* ç°¡å–®çš„é€²å ´å‹•ç•« */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-cnyBg text-gray-800 min-h-screen flex flex-col items-center pb-12 font-round">

    <header class="w-full bg-cnyRed text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-md mx-auto flex items-center justify-center gap-3">
            <img src="logo.png" alt="Logo" class="h-10 w-10 rounded-full border-2 border-cnyGold bg-white">
            <h1 class="text-xl font-bold tracking-widest">æ˜¥ç¯€ä»£æ‰“ â€¢ æ€¨æ°£æ¶ˆæ•£</h1>
        </div>
    </header>

    <main class="w-full max-w-md px-4 mt-6 space-y-6">
        
        <div class="bg-white p-6 rounded-2xl shadow-sm border border-red-100 text-center">
            <p class="text-gray-600 mb-2 font-bold text-lg">è¦ªæˆšæ‹·å•å¤ªç…©äººï¼ŸğŸ˜¡</p>
            <p class="text-sm text-gray-500 leading-relaxed font-medium">
                è¼¸å…¥å°è©±ï¼Œè®“AIç”¨å¹½é»˜æ›¿ä½ å„ªé›…åæ“Š<br>
                ä¸€éµç”Ÿæˆé•·è¼©åœ–å›æ•¬ï¼Œè®“å®¶åº­ç¾¤çµ„ã€Œå’Œæ¨‚èèã€ğŸ˜Š
            </p>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-lg border-t-4 border-cnyRed space-y-5">
            
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">å°è±¡æ˜¯èª°ï¼Ÿ (ä¾‹å¦‚ï¼šä¸‰å§‘å…­å©†)</label>
                <input type="text" id="targetInput" placeholder="è¼¸å…¥è¦ªæˆšç¨±è¬‚..." class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-cnyRed focus:border-cnyRed outline-none transition font-medium">
            </div>

            <div>
                <label class="flex justify-between text-sm font-bold text-gray-700 mb-1">
                    <span>ç†Ÿæ‚‰ç¨‹åº¦</span>
                    <span id="familiarityVal" class="text-cnyRed">5åˆ†</span>
                </label>
                <div class="flex items-center gap-3">
                    <span class="text-2xl">ğŸ˜</span>
                    <input type="range" id="familiarityRange" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb">
                    <span class="text-2xl">ğŸ¤</span>
                </div>
            </div>

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">ä»–èªªäº†ä»€éº¼é¬¼è©±ï¼Ÿ</label>
                <textarea id="questionInput" rows="2" placeholder="ä¾‹å¦‚ï¼šä»€éº¼æ™‚å€™è¦çµå©šï¼Ÿå¹´çµ‚é ˜å¤šå°‘ï¼Ÿ" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-cnyRed outline-none transition font-medium"></textarea>
            </div>

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">é¸æ“‡å›è©±é¢¨æ ¼</label>
                <div class="grid grid-cols-2 gap-2">
                    <label class="cursor-pointer">
                        <input type="radio" name="style" value="polite" class="peer sr-only" checked>
                        <div class="p-2 text-center text-sm border rounded-lg peer-checked:bg-red-50 peer-checked:border-cnyRed peer-checked:text-cnyRed transition font-medium">ğŸ˜Š è¦ªåˆ‡ç¦®è²Œ</div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="style" value="fake" class="peer sr-only">
                        <div class="p-2 text-center text-sm border rounded-lg peer-checked:bg-red-50 peer-checked:border-cnyRed peer-checked:text-cnyRed transition font-medium">ğŸ­ å®¢å¥—å¯’æš„</div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="style" value="sarcasm" class="peer sr-only">
                        <div class="p-2 text-center text-sm border rounded-lg peer-checked:bg-red-50 peer-checked:border-cnyRed peer-checked:text-cnyRed transition font-medium">ğŸ™„ ç™½çœ¼å˜²è«·</div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="style" value="war" class="peer sr-only">
                        <div class="p-2 text-center text-sm border rounded-lg peer-checked:bg-red-50 peer-checked:border-cnyRed peer-checked:text-cnyRed transition font-medium">ğŸ’¥ å…©æ•—ä¿±å‚·</div>
                    </label>
                    <label class="cursor-pointer col-span-2">
                        <input type="radio" name="style" value="freestyle" class="peer sr-only">
                        <div class="p-2 text-center text-sm border rounded-lg peer-checked:bg-red-50 peer-checked:border-cnyRed peer-checked:text-cnyRed transition font-medium">ğŸ¦„ è‡ªç”±ç™¼æ® (éš¨æ©Ÿéˆé­‚)</div>
                    </label>
                </div>
            </div>

            <div>
                <label class="flex justify-between text-sm font-bold text-gray-700 mb-1">
                    <span>åæ“ŠåŠ›åº¦</span>
                    <span id="intensityVal" class="text-cnyRed">5åˆ†</span>
                </label>
                <div class="flex items-center gap-3">
                    <span class="text-2xl">ğŸ•Šï¸</span>
                    <input type="range" id="intensityRange" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb">
                    <span class="text-2xl">ğŸ¥Š</span>
                </div>
            </div>

            <button onclick="generateResponse()" class="w-full py-3 bg-cnyRed text-white font-bold rounded-xl shadow-md hover:bg-red-800 transform active:scale-95 transition flex justify-center items-center gap-2">
                <span>ğŸ”¥ ç”Ÿæˆç¥å›è¦†</span>
            </button>
        </div>

        <div id="resultSection" class="hidden bg-white p-6 rounded-2xl shadow-lg border border-gray-200 animate-fade-in-up">
            <h3 class="font-bold text-gray-800 mb-2">ç·¨è¼¯ä½ çš„å›è¦†ï¼š</h3>
            <textarea id="resultText" rows="4" class="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-cnyRed outline-none font-serif text-lg leading-relaxed text-gray-700"></textarea>
            
            <div class="mt-4 flex gap-2">
                <button onclick="generateImage()" class="flex-1 py-3 bg-cnyGold text-white font-bold rounded-xl shadow-md hover:bg-yellow-600 transition">
                    ğŸ“¸ è£½ä½œé•·è¼©åœ–
                </button>
            </div>
        </div>

        <div id="imageSection" class="hidden flex-col items-center space-y-4 animate-fade-in-up">
            <div class="text-center">
                <p class="text-sm text-gray-500 mb-2 font-medium">é•·æŒ‰åœ–ç‰‡å³å¯å„²å­˜æˆ–æ˜¯åˆ†äº« ğŸ‘‡</p>
                <img id="finalImage" class="w-full rounded-lg shadow-xl border-4 border-white" alt="Generated Image">
            </div>
            <a id="downloadLink" download="cny-attack.png" class="hidden w-full py-3 bg-green-600 text-white font-bold rounded-xl shadow-md text-center">
                ä¸‹è¼‰åœ–ç‰‡
            </a>
        </div>

        <canvas id="memeCanvas" width="1080" height="1080" class="hidden"></canvas>

    </main>

    <footer class="mt-12 text-center text-gray-400 text-xs">
        <p>Â© 2026 an App a Day Project.</p>
        <p>åƒ…ä¾›å¨›æ¨‚ï¼Œå®¶åº­å¤±å’Œæ¦‚ä¸è² è²¬ã€‚</p>
    </footer>

    <script>
        // Update slider values visually
        document.getElementById('familiarityRange').addEventListener('input', function(e) {
            document.getElementById('familiarityVal').innerText = e.target.value + "åˆ†";
        });
        document.getElementById('intensityRange').addEventListener('input', function(e) {
            document.getElementById('intensityVal').innerText = e.target.value + "åˆ†";
        });

        // --- Mock AI Logic (Template Database - 50 total) ---
        const templates = {
            polite: [
                "å“å‘€ï¼Œ{target}æ‚¨çœŸæœƒé–‹ç©ç¬‘ï¼Œæˆ‘é€™æ˜¯åœ¨äº«å—ç•¶ä¸‹å‘¢ã€‚",
                "è¬è¬{target}é—œå¿ƒå•¦ï¼Œæ¯å€‹äººçš„äººç”Ÿæ™‚å€ä¸ä¸€æ¨£å˜›ã€‚",
                "æ‰˜æ‚¨çš„ç¦ï¼Œä¸€åˆ‡éƒ½é‚„åœ¨è¨ˆç•«ä¸­ï¼Œæœ‰å¥½æ¶ˆæ¯ä¸€å®šç¬¬ä¸€å€‹å‘Šè¨´æ‚¨ã€‚",
                "å“ˆå“ˆï¼Œé€™å€‹å•é¡Œå¤ªæ·±å¥§äº†ï¼Œæˆ‘å€‘å…ˆåƒèœï¼Œé€™é“èœè¶ç†±åƒï¼",
                "å“å‘€ï¼Œ{target}æ‚¨è¨˜æ€§çœŸå¥½ï¼Œæ¯å¹´éƒ½å•ä¸€æ¨£çš„å•é¡Œï¼Œæˆ‘éƒ½å¿«ä¸å¥½æ„æ€äº†ã€‚",
                "è¬è¬{target}çš„å»ºè­°ï¼Œæˆ‘æœƒå¥½å¥½åƒè€ƒçš„ï¼Œä¾†ï¼Œåƒé¡†ç³–ç”œç”œå˜´ã€‚",
                "é€™å€‹å˜›â€¦èªªä¾†è©±é•·ï¼Œæˆ‘å€‘ä»Šå¤©é‡é»æ˜¯åœ˜åœ“ï¼Œå°±ä¸è«‡æˆ‘çš„ç§äº‹æƒèˆˆå•¦ã€‚",
                "{target}æ‚¨çœ‹èµ·ä¾†æ°£è‰²çœŸå¥½ï¼Œæ˜¯æœ‰ä»€éº¼ä¿é¤Šç§˜è¨£å—ï¼Ÿï¼ˆé¦¬ä¸Šè½‰ç§»è©±é¡Œï¼‰",
                "æ²’äº‹æ²’äº‹ï¼Œä¸€åˆ‡éš¨ç·£å˜›ï¼Œ{target}æ‚¨èªªæ˜¯å§ï¼Ÿå“ˆå“ˆã€‚",
                "è¬è¬é—œå¿ƒï¼Œæˆ‘ç¾åœ¨éå¾—å¾ˆå……å¯¦å–”ï¼å°äº†ï¼Œé€™é“èœå¾ˆå¥½åƒï¼Œæ‚¨åšåšã€‚"
            ],
            fake: [
                "æ˜¯æ˜¯æ˜¯ï¼Œ{target}èªªå¾—å°ï¼Œæˆ‘æœƒå†åŠªåŠ›çš„ï¼Œæ‚¨æœ€è¿‘èº«é«”é‚„å¥½å—ï¼Ÿ",
                "å“å”·ï¼Œé€™ç¨®å°äº‹ä¸å‹{target}è²»å¿ƒå•¦ï¼Œä¾†ä¾†ä¾†ï¼Œæˆ‘æ•¬æ‚¨ä¸€æ¯ï¼",
                "çœŸçš„å—ï¼ŸåŸä¾†å¤§å®¶éƒ½é€™éº¼æƒ³å•Šï¼Œé‚£æˆ‘å¯å¾—å¥½å¥½æª¢è¨ä¸€ä¸‹äº†ï¼ˆå‡ç¬‘ï¼‰ã€‚",
                "å“‡ï¼Œ{target}æ‚¨æ‡‚å¾—çœŸå¤šï¼Œä¸‹æ¬¡æœ‰æ©Ÿæœƒä¸€å®šå‘æ‚¨è«‹æ•™ã€‚",
                "å“‡ï¼Œè½{target}æ‚¨é€™æ¨£ä¸€èªªï¼Œæˆ‘çœŸæ˜¯èŒ…å¡é “é–‹ï¼Œå—ç›Šè‰¯å¤šå•Šï¼ˆæ£’è®€ï¼‰ã€‚",
                "çœŸçš„è€¶ï¼{target}æ‚¨çœ‹äº‹æƒ…å°±æ˜¯é€å¾¹ï¼Œä¸æ„§æ˜¯é•·è¼©ï¼Œä½©æœä½©æœã€‚",
                "å”‰å”·ï¼Œæˆ‘å“ªæ¯”å¾—ä¸Šæ‚¨å®¶å°å­©å•Šï¼Œä»–å€‘æ‰æ˜¯äººä¸­é¾é³³ï¼Œæˆ‘é€™å°±æ··å£é£¯åƒã€‚",
                "æ˜¯æ˜¯æ˜¯ï¼Œæ‚¨èªªçš„éƒ½å°ï¼Œæˆ‘ä¸€å®šéŠ˜è¨˜åœ¨å¿ƒï¼Œå›å»åˆ»åœ¨ç‰†ä¸Šã€‚",
                "{target}æ‚¨çœŸæ˜¯å¤ªæœƒèŠå¤©äº†ï¼Œè·Ÿæ‚¨èŠå¤©æ™‚é–“éå¾—çœŸå¿«ï¼Œå“å‘€æˆ‘å¾—å»å¹«å¿™æ´—ç¢—äº†ã€‚",
                "æ²’å•é¡Œï¼Œç­‰æˆ‘ç™¼å¤§è²¡äº†ä¸€å®šç¬¬ä¸€å€‹é€šçŸ¥æ‚¨ï¼Œåˆ°æ™‚å€™è«‹æ‚¨åƒå¤§é¤ï¼"
            ],
            sarcasm: [
                "{target}ï¼Œæ‚¨é€™å•é¡Œå•å¾—çœŸå¥½ï¼Œå°±åƒå•å¤ªé™½ç‚ºä»€éº¼ä¸æ˜¯ç¶ è‰²çš„ä¸€æ¨£æœ‰è¶£ã€‚",
                "æˆ‘çœ‹{target}æ‚¨é€™éº¼é–’ï¼Œä¸å¦‚å¤šé—œå¿ƒä¸€ä¸‹è‚¡å¸‚ï¼Ÿè½èªªæœ€è¿‘è·Œå¾ˆæ…˜å–”ã€‚",
                "é€™ç¨®äº‹æƒ…å°±åƒä¾¿ç§˜ï¼Œæ€¥ä¹Ÿæ²’æœ‰ç”¨ï¼Œæ‚¨èªªæ˜¯å§ï¼Ÿ",
                "å“å‘€ï¼Œæˆ‘é€™ä¸æ˜¯ç‚ºäº†è®“æ‚¨éå¹´æœ‰è©±é¡ŒèŠï¼Œæ‰ç‰¹åœ°ç•™è‘—é€™äº›å•é¡Œä¸è§£æ±ºå—ï¼Ÿ",
                "{target}ï¼Œå…¶å¯¦æˆ‘ç°½äº†ä¿å¯†å”å®šï¼Œæ´©æ¼è–ªè³‡/æ„Ÿæƒ…ç‹€æ³è¦è³ é•ç´„é‡‘çš„ï¼Œæ‚¨ç¢ºå®šè¦è½ï¼Ÿ",
                "æ‚¨é€™å•é¡Œå•å¾—å¤ªæœ‰æ°´æº–äº†ï¼Œæˆ‘éœ€è¦å›å»å¯«ç¯‡è«–æ–‡æ‰èƒ½å›ç­”æ‚¨ã€‚",
                "å“å‘€ï¼Œæˆ‘é‚„ä»¥ç‚ºä»Šå¹´æµè¡Œä¸å•éš±ç§å‘¢ï¼Œçœ‹ä¾†{target}æ‚¨æ¯”è¼ƒå¿µèˆŠå•Šã€‚",
                "é€™éº¼é—œå¿ƒæˆ‘çš„ç§ç”Ÿæ´»ï¼Œé›£é“{target}æ‚¨æœ€è¿‘ç”Ÿæ´»æ¯”è¼ƒå¹³æ·¡ä¹å‘³å—ï¼Ÿ",
                "å¦‚æœæˆ‘å›ç­”äº†ï¼Œæ‚¨æœƒåŒ…å€‹å¤§ç´…åŒ…çµ¦æˆ‘ç•¶è«®è©¢è²»å—ï¼Ÿ",
                "é€™å€‹å•é¡Œå°±è·Ÿæ‚¨çš„é«®éš›ç·šä¸€æ¨£ï¼Œæˆ‘å€‘é‚„æ˜¯ä¸è¦æ·±ç©¶æ¯”è¼ƒå¥½ã€‚"
            ],
            war: [
                "é€™å°±ä¸å‹{target}æ“å¿ƒäº†ï¼Œæˆ‘çœ‹æ‚¨é€€ä¼‘é‡‘å­˜å¾—ä¹Ÿä¸å¤ å¤šï¼Œé‚„æ˜¯å…ˆé¡§å¥½è‡ªå·±å§ã€‚",
                "ç­‰åˆ°{target}æ‚¨å­¸æœƒå°Šé‡æ™šè¼©çš„æ™‚å€™ï¼Œæˆ‘å°±æœƒå›ç­”é€™å€‹å•é¡Œäº†ã€‚",
                "æ‚¨é€™éº¼é—œå¿ƒæˆ‘çš„è–ªæ°´/æ„Ÿæƒ…ï¼Œæ˜¯è¦è´ŠåŠ©æˆ‘å—ï¼ŸåŒ¯æ¬¾å¸³è™Ÿæˆ‘ç¾åœ¨çµ¦æ‚¨ï¼Ÿ",
                "ä»¥å‰å°æ™‚å€™æ‚¨æ•™æˆ‘è¦èª å¯¦ï¼Œé‚£æˆ‘å°±ç›´èªªäº†ï¼šé€™å•é¡Œå¾ˆæ²’ç¦®è²Œã€‚",
                "æ—¢ç„¶{target}æ‚¨é€™éº¼èª å¿ƒç™¼å•äº†ï¼Œé‚£æˆ‘ä¹Ÿé †ä¾¿å•å•ï¼Œæ‚¨ä¸Šæ¬¡æ¬ åˆ¥äººçš„éŒ¢é‚„äº†å—ï¼Ÿ",
                "æˆ‘çœ‹æ‚¨é‚„æ˜¯å¤šæ“å¿ƒè‡ªå·±çš„é€€ä¼‘ç”Ÿæ´»å§ï¼Œç¾åœ¨çœ‹è­·è²»ç”¨å¾ˆè²´çš„ã€‚",
                "{target}ï¼Œå¤§éå¹´çš„ï¼Œä½•å¿…äº’ç›¸ç‚ºé›£å‘¢ï¼Ÿæ‚¨ä¸å°·å°¬ï¼Œæˆ‘éƒ½æ›¿æ‚¨å°·å°¬äº†ã€‚",
                "èˆ‡å…¶æ“”å¿ƒæˆ‘çµä¸çµå©šï¼Œä¸å¦‚æ“”å¿ƒæ‚¨å®¶å°å­©ä»¥å¾Œæœƒä¸æœƒé€æ‚¨å»é¤Šè€é™¢å§ã€‚",
                "æˆ‘ä»¥ç‚ºé•·è¼©çš„æ™ºæ…§æ˜¯æ‡‚å¾—ä»€éº¼è©²å•ï¼Œä»€éº¼ä¸è©²å•ã€‚çœ‹ä¾†æˆ‘éŒ¯äº†ã€‚",
                "æ‚¨å†å•ä¸‹å»ï¼Œé€™é “å¹´å¤œé£¯å¯èƒ½å°±æ˜¯æœ€å¾Œä¸€é “åœ˜åœ“é£¯å›‰ã€‚"
            ],
            freestyle: [
                "ä½›æ›°ï¼šä¸å¯èªªï¼Œä¸å¯èªªã€‚",
                "æ–½ä¸»ï¼Œé€™å€‹å•é¡Œçš„ç­”æ¡ˆï¼Œéœ€è¦æ…§æ ¹ã€‚",
                "ï¼ˆçœ‹è‘—é æ–¹ï¼‰...é¢¨èµ·äº†ã€‚",
                "é€™å•é¡Œé€™åƒ¹æ ¼æˆ‘æ²’è¾¦æ³•å›ç­”ï¼Œè«‹ä»˜è²»è§£é–ã€‚",
                "ï¼ˆçªç„¶çœ‹å‘çª—å¤–ï¼‰å’¦ï¼Ÿä»Šå¹´æ˜¯ä¸æ˜¯æ²’ä»€éº¼é­ç‚®è²å•Šï¼Ÿ",
                "é—œæ–¼é€™å€‹å•é¡Œï¼Œæˆ‘è«‹æˆ‘çš„AIå¾‹å¸«ç¨å¾Œè·Ÿæ‚¨è¯ç¹«ã€‚",
                "åªè¦ä½ ä¸å°·å°¬ï¼Œå°·å°¬çš„å°±æ˜¯åˆ¥äººã€‚æ–½ä¸»ä¿é‡ã€‚",
                "Error 404: Answer Not Found. è«‹é‡æ–°é–‹æ©Ÿè©¦è©¦ã€‚",
                "å‘½è£¡æœ‰æ™‚çµ‚é ˆæœ‰ï¼Œå‘½è£¡ç„¡æ™‚è«å¼·æ±‚ï¼Œ{target}æ‚¨èªªæ˜¯å§ã€‚",
                "ï¼ˆé–‹å§‹æ¨¡ä»¿Siriè²éŸ³ï¼‰æˆ‘å¥½åƒä¸å¤ªæ˜ç™½æ‚¨çš„æ„æ€ï¼Œæ‚¨å¯ä»¥å†èªªä¸€æ¬¡å—ï¼Ÿ"
            ]
        };

        function generateResponse() {
            const target = document.getElementById('targetInput').value || "è¦ªæˆš";
            const style = document.querySelector('input[name="style"]:checked').value;
            const intensity = parseInt(document.getElementById('intensityRange').value);
            
            let effectiveStyle = style;
            if (intensity > 8 && style === 'polite') effectiveStyle = 'sarcasm';
            if (intensity > 9 && style === 'fake') effectiveStyle = 'war';

            const options = templates[effectiveStyle];
            let response = options[Math.floor(Math.random() * options.length)];
            
            response = response.replace(/{target}/g, target);

            if (intensity > 7) response += " ğŸ™„";
            else if (intensity < 3) response += " ğŸ˜Š";

            document.getElementById('resultText').value = response;
            const resultSection = document.getElementById('resultSection');
            resultSection.classList.remove('hidden');
            
            resultSection.classList.remove('animate-fade-in-up');
            void resultSection.offsetWidth; // trigger reflow
            resultSection.classList.add('animate-fade-in-up');

            setTimeout(() => {
                resultSection.scrollIntoView({behavior: 'smooth', block: 'center'});
            }, 100);
        }

        // --- Image Generation Logic (ä¿®æ­£é»2ï¼šæ”¯æ´8å¼µèƒŒæ™¯åœ–èˆ‡éŒ¯èª¤è™•ç†) ---
        function generateImage() {
            const canvas = document.getElementById('memeCanvas');
            const ctx = canvas.getContext('2d');
            const text = document.getElementById('resultText').value;

            // å…ˆæ¸…ç©ºä¸¦å¡«å……ç™½è‰²èƒŒæ™¯ä½œç‚ºåŸºåº•
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#fff";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 1. Load Background
            // ä¿®æ”¹é»ï¼šéš¨æ©Ÿç¯„åœæ”¹ç‚º 1 åˆ° 8
            const bgNum = Math.floor(Math.random() * 8) + 1; 
            const img = new Image();
            // åŠ å…¥æ™‚é–“æˆ³è¨˜é¿å…ç·©å­˜å•é¡Œ (å¯é¸)
            img.src = `background${bgNum}.png?t=${new Date().getTime()}`;
            
            img.onload = function() {
                // Draw Background with Opacity OVER the white base
                ctx.save();
                ctx.globalAlpha = 0.3; // 30% opacity
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                ctx.restore();
                // åœ–ç‰‡è¼‰å…¥æˆåŠŸå¾Œï¼Œç¹ªè£½æ–‡å­—
                drawTextContent();
            };
            
            // Error handling: å¦‚æœèƒŒæ™¯åœ–è¼‰å…¥å¤±æ•—ï¼Œè‡³å°‘é‚„æœƒé¡¯ç¤ºç™½è‰²èƒŒæ™¯èˆ‡æ–‡å­—
            img.onerror = function() {
                console.error(`Background image (background${bgNum}.png) failed to load. Using white background.`);
                // åœ–ç‰‡å¤±æ•—ï¼Œç›´æ¥ç¹ªè£½æ–‡å­—
                drawTextContent();
            };

            // å°‡ç¹ªè£½æ–‡å­—çš„é‚è¼¯ç¨ç«‹å‡ºä¾†ï¼Œæ–¹ä¾¿é‡è¤‡å‘¼å«
            function drawTextContent() {
                 // 2. Styling Text
                 ctx.fillStyle = "#B91C1C"; // Deep Red Text
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                // é•·è¼©åœ–å°±æ˜¯è¦ç”¨å®‹é«”/æ˜é«”
                ctx.font = "bold 80px 'Noto Serif TC'"; 
                
                // Text Wrapping Logic
                const maxWidth = 900;
                const words = text.split('');
                let line = '';
                let lines = [];
                
                for(let n = 0; n < words.length; n++) {
                    const testLine = line + words[n];
                    const metrics = ctx.measureText(testLine);
                    const testWidth = metrics.width;
                    if (testWidth > maxWidth && n > 0) {
                        lines.push(line);
                        line = words[n];
                    } else {
                        line = testLine;
                    }
                }
                lines.push(line);

                // Draw Text Lines
                const lineHeight = 110;
                const totalHeight = lines.length * lineHeight;
                let startY = (canvas.height - totalHeight) / 2 + 40;

                // Add "Greetings" decoration
                ctx.font = "bold 60px 'Zen Maru Gothic'";
                ctx.fillStyle = "#F59E0B"; // Gold
                ctx.fillText("æ—©å®‰ï¼Œå¹³å®‰å–œæ¨‚", canvas.width/2, 100);

                // Main Text Shadow & Stroke
                ctx.shadowColor = "white";
                ctx.shadowBlur = 15;
                ctx.font = "bold 90px 'Noto Serif TC'";
                ctx.fillStyle = "#B00"; // Text Color

                lines.forEach((l, i) => {
                    // White stroke for readability
                    ctx.strokeStyle = "white";
                    ctx.lineWidth = 12;
                    ctx.strokeText(l, canvas.width/2, startY + (i * lineHeight));
                    // Main text fill
                    ctx.fillText(l, canvas.width/2, startY + (i * lineHeight));
                });

                // Add "èªåŒè«‹åˆ†äº«" footer
                ctx.font = "40px 'Zen Maru Gothic'";
                ctx.fillStyle = "#555";
                ctx.shadowBlur = 0;
                ctx.fillText("èªåŒè«‹åˆ†äº«", canvas.width/2, canvas.height - 80);

                // 3. Export to Image
                const dataURL = canvas.toDataURL('image/png');
                const finalImg = document.getElementById('finalImage');
                finalImg.src = dataURL;
                
                const imageSection = document.getElementById('imageSection');
                imageSection.classList.remove('hidden');
                
                // é‡æ–°è§¸ç™¼å‹•ç•«
                imageSection.classList.remove('animate-fade-in-up');
                void imageSection.offsetWidth; // trigger reflow
                imageSection.classList.add('animate-fade-in-up');

                imageSection.scrollIntoView({behavior: 'smooth', block: 'center'});

                const dlLink = document.getElementById('downloadLink');
                dlLink.href = dataURL;
            }
        }
    </script>
</body>
</html>
